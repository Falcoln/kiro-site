<!DOCTYPE html>
<html lang="fr">
<head>
  <meta charset="UTF-8" />
  <title>KIRO ‚Äì Business Plan | Go-to-Market</title>
  <meta name="viewport" content="width=device-width, initial-scale=1" />
  <link rel="stylesheet" href="css/kiro.css" />


</head>

<body data-theme="dark">
<div class="page">

  <!-- HEADER BP -->
<header class="bp-header">
  <div class="bp-header-inner">

    <div class="bp-left">
      <a href="index.html" title="Retour au site public">
        <img src="assets/logo-kiro-white.png" class="logo-img logo-light" alt="Kiro" />
        <img src="assets/logo-kiro-dark.png" class="logo-img logo-dark" alt="Kiro" />
      </a>
      <span class="bp-badge">Business Plan</span>
    </div>

    <nav class="bp-nav">
      <a class="bp-link" href="bp-executive.html">Executive</a>
      <a class="bp-link" href="bp-vision.html">Vision</a>
      <a class="bp-link" href="bp-probleme.html">Probl√®me</a>
      <a class="bp-link" href="bp-solution.html">Solution</a>
      <a class="bp-link" href="bp-valeur.html">Valeur</a>
      <a class="bp-link" href="bp-produit.html">Produit</a>
      <a class="bp-link" href="bp-marche.html">March√©</a>
      <a class="bp-link" href="bp-concurrence.html">Concurrence</a>
      <a class="bp-link" href="bp-modele.html">Mod√®le</a>
      <a class="bp-link active" href="bp-gotomarket.html">Go-to-Market</a>
      <a class="bp-link" href="bp-organisation.html">Organisation</a>
      <a class="bp-link" href="bp-traction.html">Traction</a>
      <a class="bp-link" href="bp-financials.html">Finances</a>
      <a class="bp-link" href="bp-risks.html">Risques</a>
      <a class="bp-link" href="bp-conclusion.html">Conclusion</a>
    </nav>

  </div>
</header>


  <main>

    <!-- HERO -->
    <section class="hero" style="padding:110px 0 70px;">
      <div class="hero-inner">
        <div class="section-kicker">Chapitre 9</div>
        <h1 class="hero-title">Go-to-market & Parcours client.</h1>
        <p class="hero-subtitle" style="max-width:980px;">
          KIRO se vend par la preuve, pas par la promesse : audit ‚Üí premier p√©rim√®tre ‚Üí valeur mesur√©e ‚Üí expansion.
        </p>
      </div>
    </section>

    <!-- STRATEGY -->
    <section class="section">
      <div class="section-inner">
        <div class="card light-card glow-blue">
          <div class="section-kicker">Strat√©gie</div>
          <h2 class="card-title">Un cycle court, ma√Ætris√©.</h2>
          <p class="card-text">
            Peu de canaux, bien ex√©cut√©s. Une activation rapide. Une expansion naturelle.
            Objectif : signer des clients bien choisis, les activer vite, et construire une base saine.
          </p>
        </div>
      </div>
    </section>

    <!-- CHANNELS -->
    <section class="section section-alt">
      <div class="section-inner">
        <h2 class="section-title">Canaux d‚Äôacquisition (phase 1).</h2>

        <div class="section-grid">
          <div class="card">
            <h3 class="card-title">R√©seau & recommandations</h3>
            <p class="card-text">
              Traction initiale √† forte confiance (fondateur-led sales).
            </p>
          </div>

          <div class="card">
            <h3 class="card-title">Partenariats terrain</h3>
            <p class="card-text">
              Experts-comptables, consultants, acteurs proches des op√©rations.
            </p>
          </div>

          <div class="card">
            <h3 class="card-title">Contenu p√©dagogique cibl√©</h3>
            <p class="card-text">
              Cas concrets. Avant/apr√®s. Z√©ro jargon.
            </p>
          </div>
        </div>
      </div>
    </section>

    <!-- JOURNEY -->
    <section class="section">
      <div class="section-inner">
        <h2 class="section-title">Parcours client.</h2>

        <div class="section-grid">
          <div class="card glow-blue">D√©couverte & prise de contact</div>
          <div class="card glow-blue">Audit op√©rationnel</div>
          <div class="card glow-blue">Setup & 1er p√©rim√®tre</div>
          <div class="card glow-blue">Abonnement & usage</div>
          <div class="card glow-blue">Expansion progressive</div>
        </div>
      </div>
    </section>

    <!-- CLIENT PROJECTION CHARTS -->
    <section class="section section-alt">
      <div class="section-inner">
        <h2 class="section-title">Projection clients (3 ans).</h2>
        <p class="section-subtitle">
          Croissance progressive : Centre-Val de Loire ‚Üí France, sans marketing de masse.
        </p>

        <div class="bp-charts">

          <!-- Bar chart: New customers per year -->
          <div class="bp-chart">
            <div class="bp-chart-head">
              <h3 class="bp-chart-title">Nouveaux clients / an</h3>
              <p class="bp-chart-sub">Objectif ‚Äúsobre mais solide‚Äù</p>
            </div>

            <svg class="bp-svg" viewBox="0 0 520 320" role="img" aria-label="Bar chart nouveaux clients par an">
              <rect x="40" y="20" width="460" height="240" rx="14" fill="rgba(2,6,23,0.35)" stroke="rgba(148,163,184,0.18)"/>

              <line class="bp-gridline" x1="40" y1="260" x2="500" y2="260"></line>
              <line class="bp-gridline" x1="40" y1="200" x2="500" y2="200"></line>
              <line class="bp-gridline" x1="40" y1="140" x2="500" y2="140"></line>
              <line class="bp-gridline" x1="40" y1="80"  x2="500" y2="80"></line>
              <line class="bp-gridline" x1="40" y1="20"  x2="500" y2="20"></line>

              <text class="bp-tick" x="12" y="264">0</text>
              <text class="bp-tick" x="8"  y="204">20</text>
              <text class="bp-tick" x="8"  y="144">40</text>
              <text class="bp-tick" x="8"  y="84">80</text>

              <rect class="bp-bar-soft" x="95"  y="60" width="90" height="200" rx="12"></rect>
              <rect class="bp-bar-soft" x="215" y="60" width="90" height="200" rx="12"></rect>
              <rect class="bp-bar-soft" x="335" y="60" width="90" height="200" rx="12"></rect>

              <rect class="bp-bar" data-bar="15" x="95"  y="260" width="90" height="0" rx="12"></rect>
              <rect class="bp-bar" data-bar="40" x="215" y="260" width="90" height="0" rx="12"></rect>
              <rect class="bp-bar" data-bar="80" x="335" y="260" width="90" height="0" rx="12"></rect>

              <text class="bp-bar-label" x="140" y="292" text-anchor="middle">Ann√©e 1</text>
              <text class="bp-bar-label" x="260" y="292" text-anchor="middle">Ann√©e 2</text>
              <text class="bp-bar-label" x="380" y="292" text-anchor="middle">Ann√©e 3</text>

              <text class="bp-bar-value" data-barval="15" x="140" y="252" text-anchor="middle" opacity="0">15</text>
              <text class="bp-bar-value" data-barval="40" x="260" y="252" text-anchor="middle" opacity="0">40</text>
              <text class="bp-bar-value" data-barval="80" x="380" y="252" text-anchor="middle" opacity="0">80</text>
            </svg>

            <p class="bp-chart-note">
              L‚Äôann√©e 1 valide le mod√®le (activation + r√©tention), l‚Äôann√©e 2 structure, l‚Äôann√©e 3 acc√©l√®re.
            </p>
          </div>

          <!-- Line chart: Cumulative customers -->
          <div class="bp-chart">
            <div class="bp-chart-head">
              <h3 class="bp-chart-title">Clients cumul√©s</h3>
              <p class="bp-chart-sub">Trajectoire 3 ans</p>
            </div>

            <svg class="bp-svg" viewBox="0 0 520 320" role="img" aria-label="Line chart clients cumul√©s">
              <rect x="40" y="20" width="460" height="240" rx="14" fill="rgba(2,6,23,0.35)" stroke="rgba(148,163,184,0.18)"/>

              <line class="bp-gridline" x1="40" y1="260" x2="500" y2="260"></line>
              <line class="bp-gridline" x1="40" y1="200" x2="500" y2="200"></line>
              <line class="bp-gridline" x1="40" y1="140" x2="500" y2="140"></line>
              <line class="bp-gridline" x1="40" y1="80"  x2="500" y2="80"></line>
              <line class="bp-gridline" x1="40" y1="20"  x2="500" y2="20"></line>

              <text class="bp-tick" x="8" y="264">0</text>
              <text class="bp-tick" x="0" y="204">50</text>
              <text class="bp-tick" x="0" y="144">100</text>
              <text class="bp-tick" x="0" y="84">150</text>

              <text class="bp-bar-label" x="120" y="292" text-anchor="middle">Ann√©e 1</text>
              <text class="bp-bar-label" x="270" y="292" text-anchor="middle">Ann√©e 2</text>
              <text class="bp-bar-label" x="420" y="292" text-anchor="middle">Ann√©e 3</text>

              <path class="bp-line" id="bpLine" d="M 120 236 L 270 172 L 420 64"></path>

              <circle class="bp-point-ring" cx="120" cy="236" r="14"></circle>
              <circle class="bp-point" cx="120" cy="236" r="6"></circle>

              <circle class="bp-point-ring" cx="270" cy="172" r="14"></circle>
              <circle class="bp-point" cx="270" cy="172" r="6"></circle>

              <circle class="bp-point-ring" cx="420" cy="64" r="14"></circle>
              <circle class="bp-point" cx="420" cy="64" r="6"></circle>

              <text class="bp-bar-value" x="120" y="222" text-anchor="middle">15</text>
              <text class="bp-bar-value" x="270" y="158" text-anchor="middle">55</text>
              <text class="bp-bar-value" x="420" y="50"  text-anchor="middle">135</text>
            </svg>

            <p class="bp-chart-note">
              La trajectoire repose sur l‚Äôactivation rapide + l‚Äôexpansion par client, pas sur la volum√©trie brute.
            </p>
          </div>

        </div>
      </div>
    </section>

    <!-- FUNNEL -->
    <section class="section">
      <div class="section-inner">
        <div class="bp-funnel">
          <div class="bp-funnel-head">
            <h3 class="bp-funnel-title">Funnel d‚Äôachat (parcours client)</h3>
            <p class="bp-funnel-sub">Audit ‚Üí Setup ‚Üí Abonnement ‚Üí Expansion</p>
          </div>

          <div class="funnel-grid" id="kiroFunnel"
               data-visits="600"
               data-leads="120"
               data-audits="60"
               data-setup="24"
               data-saas="15"
               data-expand="9">

            <div class="funnel-step" data-step>
              <div class="funnel-row">
                <div class="funnel-left">
                  <div class="funnel-kicker">√âtape 1</div>
                  <h4 class="funnel-name">D√©couverte</h4>
                  <p class="funnel-desc">Visiteurs qualifi√©s via r√©seau, site et recommandations.</p>
                  <span class="funnel-badge"><span class="funnel-dot"></span> Message : ‚Äúr√©cup√©rer du temps, concr√®tement‚Äù</span>
                </div>
                <div class="funnel-right">
                  <div class="funnel-count" data-count="visits">600</div>
                  <div class="funnel-rate">Base annuelle (hyp.)</div>
                </div>
              </div>
            </div>

            <div class="funnel-step" data-step>
              <div class="funnel-row">
                <div class="funnel-left">
                  <div class="funnel-kicker">√âtape 2</div>
                  <h4 class="funnel-name">Lead qualifi√©</h4>
                  <p class="funnel-desc">Prise de contact + filtre simple (taille, intensit√© op√©rationnelle, urgence).</p>
                  <span class="funnel-badge"><span class="funnel-dot"></span> Filtre : PME & cabinets 10‚Äì100</span>
                </div>
                <div class="funnel-right">
                  <div class="funnel-count" data-count="leads">120</div>
                  <div class="funnel-rate" data-rate="leads"></div>
                </div>
              </div>
            </div>

            <div class="funnel-step" data-step>
              <div class="funnel-row">
                <div class="funnel-left">
                  <div class="funnel-kicker">√âtape 3</div>
                  <h4 class="funnel-name">Audit op√©rationnel</h4>
                  <p class="funnel-desc">Diagnostic + choix d‚Äôun premier p√©rim√®tre + estimation de gains.</p>
                  <span class="funnel-badge"><span class="funnel-dot"></span> Vendre par la preuve</span>
                </div>
                <div class="funnel-right">
                  <div class="funnel-count" data-count="audits">60</div>
                  <div class="funnel-rate" data-rate="audits"></div>
                </div>
              </div>
            </div>

            <div class="funnel-step" data-step>
              <div class="funnel-row">
                <div class="funnel-left">
                  <div class="funnel-kicker">√âtape 4</div>
                  <h4 class="funnel-name">Setup</h4>
                  <p class="funnel-desc">Mise en production du 1er p√©rim√®tre (int√©grations, r√®gles, supervision).</p>
                  <span class="funnel-badge"><span class="funnel-dot"></span> Setup = activation du SaaS</span>
                </div>
                <div class="funnel-right">
                  <div class="funnel-count" data-count="setup">24</div>
                  <div class="funnel-rate" data-rate="setup"></div>
                </div>
              </div>
            </div>

            <div class="funnel-step" data-step>
              <div class="funnel-row">
                <div class="funnel-left">
                  <div class="funnel-kicker">√âtape 5</div>
                  <h4 class="funnel-name">Abonnement SaaS</h4>
                  <p class="funnel-desc">Usage quotidien + stabilisation du premier p√©rim√®tre.</p>
                  <span class="funnel-badge"><span class="funnel-dot"></span> KPI : activation + r√©tention</span>
                </div>
                <div class="funnel-right">
                  <div class="funnel-count" data-count="saas">15</div>
                  <div class="funnel-rate" data-rate="saas"></div>
                </div>
              </div>
            </div>

            <div class="funnel-step" data-step>
              <div class="funnel-row">
                <div class="funnel-left">
                  <div class="funnel-kicker">√âtape 6</div>
                  <h4 class="funnel-name">Expansion</h4>
                  <p class="funnel-desc">Ajout d‚Äôagents et extension √† d‚Äôautres √©quipes/flux.</p>
                  <span class="funnel-badge"><span class="funnel-dot"></span> KPI : NRR</span>
                </div>
                <div class="funnel-right">
                  <div class="funnel-count" data-count="expand">9</div>
                  <div class="funnel-rate" data-rate="expand"></div>
                </div>
              </div>
            </div>

          </div>

          <div class="funnel-proof">
            <strong>Note :</strong> volumes = hypoth√®ses de travail (ann√©e 1). L‚Äôenjeu : activation + expansion, pas la volum√©trie brute.
          </div>
        </div>
      </div>
    </section>

    <!-- BRIDGE + CHURN -->
    <section class="section section-alt">
      <div class="section-inner">

        <div class="bp-bridge"
             id="gtmBridge"
             data-arpu="1800"
             data-setup_fee="3000"
             data-gm="0.75"
             data-churn_annual="0.08">

          <div class="bp-bridge-grid">
            <div>
              <div class="bp-funnel-head" style="margin:0 0 6px;">
                <h3 class="bp-funnel-title">Bridge : Funnel ‚Üí Revenus (Ann√©e 1)</h3>
                <p class="bp-funnel-sub">Ordres de grandeur, pas encore le chapitre financier</p>
              </div>

              <div class="bp-bridge-kpis">
                <div class="bp-bridge-kpi">
                  <div class="label">Nouveaux clients</div>
                  <div class="value" id="kpiClients">‚Äì</div>
                  <div class="hint">Issu du funnel (√©tape ‚ÄúAbonnement SaaS‚Äù)</div>
                </div>

                <div class="bp-bridge-kpi">
                  <div class="label">MRR estim√©</div>
                  <div class="value" id="kpiMRR">‚Äì</div>
                  <div class="hint"><span class="bp-muted">ARPU :</span> <span id="kpiARPU">‚Äì</span> ‚Ç¨/mois</div>
                </div>

                <div class="bp-bridge-kpi">
                  <div class="label">ARR estim√©</div>
                  <div class="value" id="kpiARR">‚Äì</div>
                  <div class="hint">MRR √ó 12</div>
                </div>
              </div>

              <div class="bp-bridge-kpis">
                <div class="bp-bridge-kpi">
                  <div class="label">Setup (one-shot)</div>
                  <div class="value" id="kpiSetup">‚Äì</div>
                  <div class="hint"><span class="bp-muted">Forfait :</span> <span id="kpiSetupFee">‚Äì</span> ‚Ç¨ / client</div>
                </div>

                <div class="bp-bridge-kpi">
                  <div class="label">Marge brute</div>
                  <div class="value" id="kpiGM">‚Äì</div>
                  <div class="hint">Hypoth√®se <span id="kpiGMRate">‚Äì</span></div>
                </div>

                <div class="bp-bridge-kpi">
                  <div class="label">GM (MRR)</div>
                  <div class="value" id="kpiGMMRR">‚Äì</div>
                  <div class="hint">MRR √ó marge brute</div>
                </div>
              </div>

              <div class="bp-bridge-note">
                <strong>Lecture :</strong> ann√©e 1 = traction ‚Äúpropre‚Äù : quelques clients activ√©s, un MRR qui d√©marre,
                et une base saine pour l‚Äôexpansion (NRR) en ann√©e 2.
              </div>
            </div>

            <div class="bp-churn-card">
              <div class="bp-funnel-head" style="margin:0;">
                <h3 class="bp-funnel-title">Churn (notion + hypoth√®se)</h3>
                <p class="bp-funnel-sub">Pourquoi la r√©tention est un levier majeur</p>
              </div>

              <span class="bp-churn-pill"><span class="bp-churn-dot"></span> Churn annuel cible : <strong><span id="kpiChurn">‚Äì</span></strong></span>

              <p class="bp-mini" style="margin:0;">
                Le churn est la ‚Äúfuite‚Äù du MRR. La meilleure trajectoire = <strong>churn faible + expansion</strong>.
              </p>

              <div class="bp-proof">
                <strong>Impact simple :</strong> plus la fuite est faible, plus le niveau de MRR monte vite,
                √† acquisition identique.
              </div>

              <div class="bp-proof">
                <strong>KIRO vise :</strong> ancrage op√©rationnel (agents en production) ‚Üí r√©tention √©lev√©e ‚Üí NRR &gt; 100%.
              </div>
            </div>
          </div>
        </div>

<!-- === R√âSERVOIR (VERSION ENFANTINE / SIMPLE) === -->
<section class="bp-kidwrap" id="bpKidReservoir"
  data-in="27000"
  data-exp="6000"
  data-churn="4000">

  <div class="bp-kidhead">
    <div class="bp-kidkicker">MRR ¬∑ VISUALISATION</div>
    <h2 class="bp-kidh2">Le r√©servoir (version enfantine).</h2>
    <p class="bp-kidp">Deux robinets remplissent (nouveaux clients + expansion). Une fuite retire (churn). Le niveau d‚Äôeau = MRR net.</p>
  </div>

  <div class="bp-kidgrid">
    <!-- DESSIN -->
    <div class="bp-kidcard">
      <div class="bp-kidcanvas" id="bpKidCanvas" style="--level:22%;">
        <div class="bp-kidbadge" id="bpKidNetBadge">MRR net : ‚Äì</div>

        <!-- ROBINETS (visuels + chiffres) -->
        <div class="bp-kidtaps">
          <div class="bp-kidtap bp-kidtap--in">
            <div class="bp-kidtap-icon">üö∞</div>
            <div class="bp-kidtap-title">Nouveaux clients</div>
            <div class="bp-kidtap-val" id="bpKidInTop">+ 0 ‚Ç¨</div>
          </div>

          <div class="bp-kidtap bp-kidtap--exp">
            <div class="bp-kidtap-icon">üö∞</div>
            <div class="bp-kidtap-title">Expansion</div>
            <div class="bp-kidtap-val" id="bpKidExpTop">+ 0 ‚Ç¨</div>
          </div>
        </div>

        <!-- Filets d‚Äôeau (cartoon) -->
        <div class="bp-kidstream bp-kidstream--in" aria-hidden="true"></div>
        <div class="bp-kidstream bp-kidstream--exp" aria-hidden="true"></div>

        <!-- CUVE -->
        <div class="bp-kidtank">
          <div class="bp-kidwater"></div>
          <div class="bp-kidwaterline"></div>
        </div>

        <!-- FUITE (√† droite, hors cuve) -->
        <div class="bp-kidleak" aria-hidden="true">
          <span class="bp-kidhole"></span>
          <span class="bp-kidleak-tag">CHURN</span>
        </div>
        <div class="bp-kidleakdrop" aria-hidden="true"></div>
        <div class="bp-kidleakdrop is2" aria-hidden="true"></div>
      </div>
    </div>

    <!-- CHIFFRES (colonne droite) -->
    <div class="bp-kidside">
      <div class="bp-kidmetric">
        <div class="bp-kidmetric-label">MRR entrant</div>
        <div class="bp-kidmetric-val isBlue" id="bpKidInSide">+ 0 ‚Ç¨</div>
        <div class="bp-kidmetric-desc">Nouveaux clients (ann√©e 1)</div>
      </div>

      <div class="bp-kidmetric">
        <div class="bp-kidmetric-label">Expansion</div>
        <div class="bp-kidmetric-val isCyan" id="bpKidExpSide">+ 0 ‚Ç¨</div>
        <div class="bp-kidmetric-desc">Agents suppl√©mentaires</div>
      </div>

      <div class="bp-kidmetric isRed">
        <div class="bp-kidmetric-label">Churn</div>
        <div class="bp-kidmetric-val isRed" id="bpKidChurnSide">‚Äì 0 ‚Ç¨</div>
        <div class="bp-kidmetric-desc">Clients perdus / downsell</div>
      </div>

      <div class="bp-kidnote">
        Lecture : si les robinets versent plus que la fuite, le niveau monte.
      </div>
    </div>
  </div>
</section>

<script>
(() => {
  const root = document.getElementById("bpKidReservoir");
  if (!root) return;

  const inMrr   = Number(root.dataset.in || 0);
  const expMrr  = Number(root.dataset.exp || 0);
  const churn   = Number(root.dataset.churn || 0);
  const net     = Math.max(0, inMrr + expMrr - churn);

  const fmt = (n) => new Intl.NumberFormat("fr-FR").format(Math.round(n));

  // chiffres
  document.getElementById("bpKidInTop").textContent   = `+ ${fmt(inMrr)} ‚Ç¨`;
  document.getElementById("bpKidExpTop").textContent  = `+ ${fmt(expMrr)} ‚Ç¨`;
  document.getElementById("bpKidInSide").textContent  = `+ ${fmt(inMrr)} ‚Ç¨`;
  document.getElementById("bpKidExpSide").textContent = `+ ${fmt(expMrr)} ‚Ç¨`;
  document.getElementById("bpKidChurnSide").textContent = `‚Äì ${fmt(churn)} ‚Ç¨`;
  document.getElementById("bpKidNetBadge").textContent  = `MRR net : ${fmt(net)} ‚Ç¨`;

  // niveau d‚Äôeau (simple & lisible)
  const max = Math.max(inMrr + expMrr + churn, 1);  // on inclut la fuite pour ‚Äúvoir‚Äù le churn
  const raw = Math.round((net / max) * 100);
  const level = Math.max(18, Math.min(86, raw));

  const canvas = document.getElementById("bpKidCanvas");
  canvas.style.setProperty("--level", "18%");
  setTimeout(() => canvas.style.setProperty("--level", level + "%"), 160);
})();

</script>

</script>


    <!-- KPIS -->
    <section class="section">
      <div class="section-inner">
        <h2 class="section-title">Indicateurs cl√©s (pilotage).</h2>
        <ul class="aa-list">
          <li>Taux Audit ‚Üí Setup</li>
          <li>Time-to-Value</li>
          <li>Activation (1er agent en production)</li>
          <li>Expansion par client (NRR)</li>
          <li>Churn annuel</li>
        </ul>

        <div class="section-cta-row" style="margin-top:28px;">
          <a href="bp-organisation.html" class="btn-primary">Chapitre suivant : Organisation & ex√©cution</a>
          <a href="bp-modele.html" class="btn-ghost">Retour au mod√®le</a>
        </div>
      </div>
    </section>

  </main>

  <footer>¬© KIRO ‚Äì Business Plan (pages internes)</footer>

</div>

<!-- Scripts -->
<script>
  (function () {
    // Animate bars
    const bars = document.querySelectorAll('.bp-bar[data-bar]');
    const values = document.querySelectorAll('.bp-bar-value[data-barval]');
    const max = 80;
    const maxH = 200;
    const baseY = 260;

    bars.forEach((bar) => {
      const v = Number(bar.getAttribute('data-bar'));
      const h = Math.round((v / max) * maxH);
      const y = baseY - h;
      try {
        bar.animate(
          [{ height: '0px', y: baseY }, { height: h + 'px', y: y }],
          { duration: 900, easing: 'cubic-bezier(.2,.9,.2,1)', fill: 'forwards' }
        );
      } catch {
        bar.setAttribute('height', h);
        bar.setAttribute('y', y);
      }
    });

    values.forEach((t, i) => {
      setTimeout(() => {
        t.style.transition = 'opacity 500ms ease';
        t.style.opacity = '1';
      }, 420 + i * 140);
    });

    // Animate line
    const line = document.getElementById('bpLine');
    if (line) {
      const len = line.getTotalLength();
      line.style.strokeDasharray = len;
      line.style.strokeDashoffset = len;
      line.getBoundingClientRect();
      line.style.transition = 'stroke-dashoffset 1100ms cubic-bezier(.2,.9,.2,1)';
      setTimeout(() => { line.style.strokeDashoffset = '0'; }, 220);
    }
  })();
</script>

<script>
  (function () {
    const el = document.getElementById('kiroFunnel');
    if (!el) return;

    const v = {
      visits: Number(el.dataset.visits || 0),
      leads: Number(el.dataset.leads || 0),
      audits: Number(el.dataset.audits || 0),
      setup: Number(el.dataset.setup || 0),
      saas: Number(el.dataset.saas || 0),
      expand: Number(el.dataset.expand || 0)
    };

    const steps = [
      { key: 'visits', base: v.visits },
      { key: 'leads', base: v.visits },
      { key: 'audits', base: v.leads },
      { key: 'setup', base: v.audits },
      { key: 'saas', base: v.setup },
      { key: 'expand', base: v.saas }
    ];

    const stepEls = el.querySelectorAll('[data-step]');
    const countEls = el.querySelectorAll('[data-count]');
    const rateEls  = el.querySelectorAll('[data-rate]');

    const pct = (a, b) => (b > 0 ? Math.round((a / b) * 100) : 0);

    // Fill widths based on visits (keep visible)
    const max = Math.max(v.visits, 1);
    stepEls.forEach((s, i) => {
      const key = steps[i]?.key;
      const val = v[key] || 0;
      const fill = Math.max(10, Math.round((val / max) * 100));
      s.style.setProperty('--fill', '0%');
      setTimeout(() => {
        s.style.transition = 'all 900ms cubic-bezier(.2,.9,.2,1)';
        s.style.setProperty('--fill', fill + '%');
      }, 120 + i * 90);
    });

    // Counters
    countEls.forEach((c, i) => {
      const key = c.getAttribute('data-count');
      const target = v[key] || 0;
      const duration = 700;
      const start = performance.now();
      function tick(t) {
        const p = Math.min(1, (t - start) / duration);
        const val = Math.round(target * (0.12 + 0.88 * p));
        c.textContent = val.toString();
        if (p < 1) requestAnimationFrame(tick);
      }
      setTimeout(() => requestAnimationFrame(tick), 160 + i * 90);
    });

    // Rates
    rateEls.forEach((r) => {
      const key = r.getAttribute('data-rate');
      const step = steps.find(s => s.key === key);
      if (!step) return;
      const a = v[key] || 0;
      const b = step.base || 0;
      r.textContent = `Conversion : ${pct(a, b)}%`;
    });
  })();
</script>

<script>
  (function () {
    const funnel = document.getElementById('kiroFunnel');
    const bridge = document.getElementById('gtmBridge');
    if (!funnel || !bridge) return;

    const clients = Number(funnel.dataset.saas || 0);
    const arpu = Number(bridge.dataset.arpu || 0);
    const setupFee = Number(bridge.dataset.setup_fee || 0);
    const gm = Number(bridge.dataset.gm || 0);
    const churnAnnual = Number(bridge.dataset.churn_annual || 0);

    const mrr = clients * arpu;
    const arr = mrr * 12;
    const setupTotal = clients * setupFee;
    const gmMrr = mrr * gm;

    const fmt = (n) => {
      try { return new Intl.NumberFormat('fr-FR', { maximumFractionDigits: 0 }).format(n); }
      catch { return String(Math.round(n)); }
    };

    const setText = (id, text) => { const e = document.getElementById(id); if (e) e.textContent = text; };

    setText('kpiClients', fmt(clients));
    setText('kpiARPU', fmt(arpu));
    setText('kpiMRR', fmt(mrr) + ' ‚Ç¨');
    setText('kpiARR', fmt(arr) + ' ‚Ç¨');

    setText('kpiSetupFee', fmt(setupFee));
    setText('kpiSetup', fmt(setupTotal) + ' ‚Ç¨');

    setText('kpiGMRate', Math.round(gm * 100) + '%');
    setText('kpiGM', Math.round(gm * 100) + '%');
    setText('kpiGMMRR', fmt(gmMrr) + ' ‚Ç¨');

    setText('kpiChurn', Math.round(churnAnnual * 100) + '% / an');
  })();
</script>

<script>
  (function () {
    const el = document.getElementById('mrrReservoir');
    if (!el) return;

    const start = Number(el.dataset.mrrStart || 0);
    const mrrIn = Number(el.dataset.mrrIn || 0);
    const mrrExp = Number(el.dataset.mrrExpansion || 0);
    const mrrChurn = Number(el.dataset.mrrChurn || 0);

    const net = Math.max(0, start + mrrIn + mrrExp - mrrChurn);

    const fmt = (n) => {
      try { return new Intl.NumberFormat('fr-FR').format(n); }
      catch { return String(Math.round(n)); }
    };

    // Chiffres colonne droite
    const inEl = document.getElementById('mrrIn');
    const expEl = document.getElementById('mrrExpansion');
    const churnEl = document.getElementById('mrrChurn');
    if (inEl) inEl.textContent = '+ ' + fmt(mrrIn) + ' ‚Ç¨';
    if (expEl) expEl.textContent = '+ ' + fmt(mrrExp) + ' ‚Ç¨';
    if (churnEl) churnEl.textContent = '‚Äì ' + fmt(mrrChurn) + ' ‚Ç¨';

    // Badge net
    const netBadge = document.getElementById('mrrNetBadge');
    if (netBadge) netBadge.textContent = 'MRR net : ' + fmt(net) + ' ‚Ç¨';

    // Niveau d‚Äôeau (√©chelle lisible)
    const drawing = document.getElementById('tapDrawing');
    if (!drawing) return;

    const max = Math.max(mrrIn + mrrExp + mrrChurn, 1); // inclut la fuite pour ‚Äúvoir‚Äù le churn
    const fillRaw = Math.round((net / max) * 100);
    const fill = Math.max(18, Math.min(82, fillRaw));   // bornes visuelles

    setTimeout(() => {
      drawing.style.setProperty('--level', fill + '%');
    }, 220);
  })();
</script>


</body>
</html>